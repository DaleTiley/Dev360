@using System.Linq
@using MillenniumWebFixed.ViewModels
@model MillenniumWebFixed.Models.ProjectCreateVm
@{
    ViewBag.Title = "New Project";

    // toggle for tabs (false = hide all but General)
    var showTabs = false;
    var contentClass = showTabs
        ? "tab-content border border-top-0 p-3 rounded-bottom"
        : "border p-3 rounded";
}

<h5 class="mb-3">New Project</h5>

@if (showTabs)
{
    <ul class="nav nav-tabs" id="projectTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general"
                    type="button" role="tab">
                General
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Quote</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Tender</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Order</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Sales</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Attachments</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" type="button">Audit</button>
        </li>
    </ul>
}

<div class="@contentClass" id="projectTabsContent">
    <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
        @Html.Partial("Partials/_ProjectGeneralCreate", Model)
    </div>
</div>

@Html.Partial("~/Views/ManualQuote/_CustomerSearchModal.cshtml", Enumerable.Empty<CustomerDropdownItem>())
@Html.Partial("~/Views/ManualQuote/_ContactSearchModal.cshtml", Enumerable.Empty<ContactDropdownItem>())

@section Scripts {
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
    <script>
      window.lookupUrls = {
        customerRows: '@Url.Action("CustomerRows","Lookups")',
        contactRows:  '@Url.Action("ContactRows","Lookups")'
      };
    </script>
    <script src="~/Scripts/project-create.js"></script>
}

@section Modals {
    @Html.Partial("~/Views/Shared/_ValidationModal.cshtml")
}
